{% extends "base.html" %}

{% block content %}
    <h2>{{ object.get_verbose_name.self }}: {{ object }}</h2>
    
    <ul>
    {% for grandprix in object.grandprixs.all %}
        <li><a href="{% url grand_prix_detail grandprix.id %}">{{ grandprix.name }}</a></li>
    {% endfor %}
    </ul>
    
    <h3>Личный зачет</h3>
    <table class="season">
   		<tr>
	   		<th>Гонщик</th>
	   		{% for grandprix in object.grandprixs.all %}
	        	<th>
	        		<img src="{{ grandprix.country.photo.url }}" alt="Гран-При {{ grandprix.name }}" />
	        		<a href="{% url grand_prix_detail grandprix.id %}" title="Гран-При {{ grandprix.name }}">{{ grandprix.abbr }}</a>
	       		</th>
	    	{% endfor %}
	    	<th>TOTAL</th>
    	</tr>
        {% for racer in object.get_racer_table %}
            {% if racer.counted_total %}
                <tr>
                    <td class="driver"><a href="{% url racer_detail racer.id %}">{{ racer }}</a></td>
                    {% for result in racer.counted_results %}
                        <td>
                            {% if not result %}
                                &nbsp;
                            {% else %}
                                {% ifequal result '-' %}
                                    {{ result }}
                                {% else %}
                                    {{ result|floatformat }}
                                {% endifequal %}
                            {% endif %}
                        </td>
                    {% endfor %}
                    <td class="total">{{ racer.counted_total|floatformat }}</td>
                </tr>
            {% endif %}
        {% endfor %}
    </table>

{% endblock %}
