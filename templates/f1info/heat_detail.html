{% extends "base.html" %}

{% block title %}{{ object.get_verbose_name.grandprix }} {{ object.grandprix.name }} {{ object.grandprix.season.year }} | F1Online.Ru{% endblock %}
{% block title_wrap %}{% endblock %}

{% block head %}
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
	<script type="text/javascript">
	    $(function () {
	    	$('tr:odd').addClass('odd');
	        $('tr:even').addClass('even');
	    });
    </script>
{% endblock %}

{% block inner_breadcrumbs %}
	<div id="breadcrumbs-wrap">
		<div id="breadcrumbs">
			<a href="/" class="home">F1Online.Ru</a> /
			<a href="">Энциклопедия</a> / 
			<a href="{% url season_detail object.grandprix.season.id %}">Сезон {{ object.grandprix.season.year }}</a> / 
			<a href="{% url grand_prix_detail object.grandprix.id %}">{{ object.get_verbose_name.grandprix }} {{ object.grandprix.name }}</a> / 
			<span>{{ object.get_type_display }}</span>
		</div> 
	</div>
{% endblock %}

{% block content %}
	<div id="heat-detail">
	    <h2>{{ object.get_verbose_name.grandprix }} {{ object.grandprix.name }} {{ object.grandprix.season.year }} &mdash; {{ object.get_type_display }}</h2>
	    <!-- 
	    <div>{{ object.get_verbose_name.date }}: {{ object.date|date:"d.m.Y" }}</div>
	    <div>{{ object.grandprix.tracklen.track }}</div>
	    <div>{{ object.grandprix.tracklen.get_verbose_name.length }}: {{ object.grandprix.tracklen.length }}</div>
	    <div>{{ object.get_verbose_name.laps }} : {{ object.laps }}</div>
	     -->
	    
	    {% for result in object.get_results %}
	    {% if forloop.first %}
	    <table>
	        <tr>
	            <th>{{ result.get_verbose_name.position }}</th>
	            <th>{{ result.get_verbose_name.num }}</th>
	            <th>{{ result.get_verbose_name.racer }}</th>
	            <th>{{ result.get_verbose_name.team }}</th>
	            <th>{{ result.get_verbose_name.engine }}</th>
	            <th>{{ result.get_verbose_name.tyre }}</th>
	            <th>Время</th>
	            <th>Отставание</th>
                {% if object.type == 'B' %}
                    <th>Круг</th>
                {% endif %}
	            <th>&nbsp;</th>
	        </tr>
	    {% endif %}
	        <tr>
	            {% if result.is_classified %}
	                {% if result.dsq %}
	            		<td class="center nc">DSQ</td>
	           		{% else %}
	                	<td class="center">{{ result.position }}</td>
	               	{% endif %}
	            {% else %}
	               	<td class="center nc">NC</td>
	            {% endif %}
	            <td class="center">{{ result.num }}</td>
	            <td><a href="{% url racer_detail result.racer.slug %}">{{ result.racer }}</a></td>
	            <td>{{ result.team }}</td>
	            <td>{{ result.engine }}</td>
	            <td class="center">{{ result.tyre }}</td>
	            <td>{{ result.get_time_display }}</td>
	            <td>{{ result.get_delta_display }}</td>
                {% if object.type == 'B' %}
                    {% if result.position == 1 %}
                        <td>{{ object.laps }}</td>
                    {% else %}
                        <td>{{ result.laps }}</td>
                    {% endif %}
                {% endif %}
	            <td>{{ result.fail }}</td>
	        </tr>
	    {% endfor %}
		<tr>
			<td colspan="8"><h4>Не классифицированы</h4></td>
		</tr>
	    {% for result in object.get_fails %}
	        <tr>
	            {% if result.is_classified %}
	                {% if result.dsq %}
	            		<td class="center nc">DSQ</td>
	           		{% else %}
	                	<td class="center">{{ result.position }}</td>
	               	{% endif %}
	            {% else %}
	            	{% if result.dsq %}
	            		<td class="center nc">DSQ</td>
	           		{% else %}
	                	<td class="center nc">NC</td>
	               	{% endif %}
	            {% endif %}
	            <td>{{ result.num }}</td>
	            <td><a href="{% url racer_detail result.racer.slug %}">{{ result.racer }}</a></td>
	            <td>{{ result.team }}</td>
	            <td>{{ result.engine }}</td>
	            <td class="center">{{ result.tyre }}</td>
	            <td>{{ result.get_lap_display }}</td>
	            <td>{{ result.fail }}</td>
	        </tr>
	    {% endfor %}
	    </table>
	    
	    {% for best in object.bests.all %}
	        {{ best.result.racer }}
	        {{ best.lap }}
	        {{ best.get_time_display }}
	    {% endfor %}
    </div>
{% endblock %}
